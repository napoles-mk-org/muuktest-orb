description: >
  MuukTest mkcli executor to execute with Circle CI on Github pull requests

docker:
  - image: muuk/muuktest_v1:0.1
    environment:
      GRADLE_OPTS: -Xmx1024m -XX:MaxMetaspaceSize=256m
      GRADLE_USER_HOME: .gradle-home

parameters:

  t:
    type: string
    description: "Test case id or hastag name"

  p:
    type: enum
    default: tag
    enum: [tag, hashtag]
    description: "Set either tag or hastag regarding t value"

  browser:
    type: enum
    default: chrome
    enum: [chrome, firefox]
    description: "Set either from chrome or firefox to run the scritp on"

steps:
  - run:
      name: Retrieve MuukTest config files and test scripts
      command: <<include(scripts/configure_mkcli.sh)>>

  - run:
      name: Run MuukTest executor
      command: |
        cd executor/
        python3.7 mkcli.py -p << parameters.p >> -t << parameters.t >> -browser << parameters.browser >>
